<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL 2025 Week 4 Predictions Pro - Special Teams Enhanced</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a1128 0%, #1a2556 100%);
            color: #f5f5f5;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            margin-top: 20px;
        }
        
        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(45deg, #003087 0%, #009cde 100%);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .model-explanation {
            background: rgba(42, 58, 109, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        
        .special-teams-factors {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .factor-card {
            background: rgba(42, 58, 109, 0.5);
            padding: 20px;
            border-radius: 10px;
        }
        
        .factor-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #4cc9f0;
            text-align: center;
        }
        
        .predictions-container {
            margin: 30px 0;
        }
        
        .game-card {
            background: rgba(42, 58, 109, 0.5);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .game-matchup {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #4cc9f0;
        }
        
        .probability-bar {
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin: 15px 0;
            overflow: hidden;
            position: relative;
        }
        
        .away-prob {
            height: 100%;
            background: linear-gradient(90deg, #f72585, #b5179e);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .home-prob {
            position: absolute;
            right: 10px;
            top: 0;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .prediction-details {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .predicted-winner {
            font-weight: bold;
            color: #4cc9f0;
        }
        
        .pick {
            background: #f72585;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .st-advantage {
            background: #4cc9f0;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: bold;
            margin-top: 10px;
        }
        
        .key-factors {
            margin-top: 15px;
        }
        
        .key-factors ul {
            padding-left: 20px;
        }
        
        .key-factors li {
            margin-bottom: 8px;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: #c5c6c7;
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .prediction-details {
                flex-direction: column;
                gap: 10px;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>NFL 2025 Week 4 Predictions Pro</h1>
            <p class="subtitle">Enhanced with Special Teams Analysis - iMUFE Model 2.0</p>
        </header>
        
        <div class="content">
            <div class="model-explanation">
                <h2>Enhanced Prediction Model</h2>
                <p>Our iMUFE model now incorporates special teams factors that account for approximately 12-15% of game outcomes. With your current 85% accuracy rate, this enhancement could push us toward 90% accuracy for Week 4 predictions.</p>
                <p><strong>Key Special Teams Factors Added:</strong> Field goal performance, punting efficiency, return game effectiveness, coverage teams, and impact plays.</p>
            </div>
            
            <div class="special-teams-factors">
                <div class="factor-card">
                    <div class="factor-icon">ü•æ</div>
                    <h3>Kicking Game</h3>
                    <p>Field goal accuracy (especially 40+ yards), clutch performance, and kickoff touchback percentage.</p>
                </div>
                <div class="factor-card">
                    <div class="factor-icon">üèà</div>
                    <h3>Punting Game</h3>
                    <p>Net punt yardage, inside-20 efficiency, and directional kicking effectiveness.</p>
                </div>
                <div class="factor-card">
                    <div class="factor-icon">‚ö°</div>
                    <h3>Return Game</h3>
                    <p>Kick and punt return averages, return touchdowns, and starting field position impact.</p>
                </div>
                <div class="factor-card">
                    <div class="factor-icon">üõ°Ô∏è</div>
                    <h3>Coverage Teams</h3>
                    <p>Yards allowed per return, open field tackling, and preventing big plays.</p>
                </div>
            </div>
            
            <div class="predictions-container">
                <h2>Week 4 Predictions with Special Teams Analysis</h2>
                <div id="predictions-content">
                    <!-- Predictions will be generated here -->
                </div>
            </div>
        </div>
        
        <footer>
            <p>¬© 2025 FSocial NFL Predictions. All rights reserved.</p>
            <p>This app is for entertainment purposes only. Please gamble responsibly.</p>
            <p>Model Accuracy: 85% (Historical) | Target: 90% (With Special Teams Enhancement)</p>
        </footer>
    </div>

    <script>
        // Enhanced NFL 2025 Week 4 Predictions with Special Teams Factors
        const nflPredictions = {
            season: 2025,
            week: 4,
            games: [],
            specialTeamsWeights: {
                fieldGoal: 0.25,
                punting: 0.20,
                returns: 0.25,
                coverage: 0.20,
                impact: 0.10
            }
        };

        // Special Teams Data for NFL Teams (Hypothetical Week 4 2025 data)
        const specialTeamsData = {
            "Chiefs": { fieldGoal: 1.08, punting: 1.05, returns: 0.98, coverage: 1.02, impact: 1.10 },
            "Ravens": { fieldGoal: 1.02, punting: 1.12, returns: 1.05, coverage: 0.97, impact: 1.03 },
            "49ers": { fieldGoal: 0.97, punting: 1.03, returns: 1.08, coverage: 1.05, impact: 0.99 },
            "Eagles": { fieldGoal: 1.05, punting: 0.98, returns: 1.02, coverage: 1.07, impact: 1.04 },
            "Bills": { fieldGoal: 1.01, punting: 1.06, returns: 0.96, coverage: 1.01, impact: 0.97 },
            "Bengals": { fieldGoal: 0.99, punting: 1.01, returns: 1.04, coverage: 0.99, impact: 1.02 },
            "Cowboys": { fieldGoal: 1.03, punting: 0.95, returns: 1.01, coverage: 1.03, impact: 0.98 },
            "Dolphins": { fieldGoal: 0.96, punting: 1.04, returns: 1.07, coverage: 0.96, impact: 1.05 },
            "Lions": { fieldGoal: 1.04, punting: 0.99, returns: 0.99, coverage: 1.04, impact: 1.01 },
            "Packers": { fieldGoal: 0.98, punting: 1.07, returns: 1.03, coverage: 1.06, impact: 0.96 }
        };

        // Calculate special teams rating
        function calculateSpecialTeamsRating(team) {
            const st = specialTeamsData[team] || { fieldGoal: 1.0, punting: 1.0, returns: 1.0, coverage: 1.0, impact: 1.0 };
            return (st.fieldGoal * 0.25) + (st.punting * 0.20) + (st.returns * 0.25) + (st.coverage * 0.20) + (st.impact * 0.10);
        }

        // Enhanced win probability calculation with special teams
        function calculateWinProbabilityWithST(homeTeam, awayTeam, homeSTRating, awaySTRating, baseHomeWinProb) {
            // Special teams advantage calculation
            const stAdvantage = homeSTRating - awaySTRating;
            
            // Adjust win probability based on special teams advantage (0.5% per 0.01 ST advantage)
            const stAdjustment = 1 + (stAdvantage * 0.5);
            
            // Apply adjustment to base probability
            let adjustedProb = baseHomeWinProb * stAdjustment;
            
            // Ensure probability stays between 0 and 1
            adjustedProb = Math.max(0.05, Math.min(0.95, adjustedProb));
            
            return adjustedProb;
        }

        // Generate Week 4 matchups with enhanced predictions
        function generateWeek4Predictions() {
            const matchups = [
                { home: "Chiefs", away: "Ravens", baseHomeWinProb: 0.62 },
                { home: "49ers", away: "Eagles", baseHomeWinProb: 0.58 },
                { home: "Bills", away: "Bengals", baseHomeWinProb: 0.55 },
                { home: "Cowboys", away: "Lions", baseHomeWinProb: 0.60 },
                { home: "Dolphins", away: "Packers", baseHomeWinProb: 0.53 }
            ];

            nflPredictions.games = matchups.map(matchup => {
                const homeSTRating = calculateSpecialTeamsRating(matchup.home);
                const awaySTRating = calculateSpecialTeamsRating(matchup.away);
                const stAdjustedProb = calculateWinProbabilityWithST(
                    matchup.home, 
                    matchup.away, 
                    homeSTRating, 
                    awaySTRating, 
                    matchup.baseHomeWinProb
                );
                
                const stAdvantage = homeSTRating - awaySTRating;
                const awayWinProb = 1 - stAdjustedProb;
                
                // Determine winner based on adjusted probability
                let predictedWinner, pick;
                if (stAdjustedProb >= 0.5) {
                    predictedWinner = matchup.home;
                    pick = matchup.home.substring(0, 3).toUpperCase();
                } else {
                    predictedWinner = matchup.away;
                    pick = matchup.away.substring(0, 3).toUpperCase();
                }
                
                // Generate key factors based on special teams advantage
                const keyFactors = generateKeyFactors(matchup.home, matchup.away, stAdvantage);
                
                return {
                    game_id: nflPredictions.games.length + 1,
                    away_team: matchup.away,
                    home_team: matchup.home,
                    away_win_probability: awayWinProb,
                    home_win_probability: stAdjustedProb,
                    predicted_winner: predictedWinner,
                    pick: pick,
                    st_advantage: stAdvantage,
                    key_factors: keyFactors
                };
            });
        }

        // Generate key factors based on special teams analysis
        function generateKeyFactors(homeTeam, awayTeam, stAdvantage) {
            const factors = [];
            const homeST = specialTeamsData[homeTeam] || { fieldGoal: 1.0, punting: 1.0, returns: 1.0, coverage: 1.0, impact: 1.0 };
            const awayST = specialTeamsData[awayTeam] || { fieldGoal: 1.0, punting: 1.0, returns: 1.0, coverage: 1.0, impact: 1.0 };
            
            if (homeST.fieldGoal > awayST.fieldGoal * 1.1) {
                factors.push(`${homeTeam} has significant field goal advantage (${(homeST.fieldGoal/awayST.fieldGoal).toFixed(2)}x)`);
            }
            
            if (homeST.punting > awayST.punting * 1.15) {
                factors.push(`${homeTeam}'s punting game should control field position`);
            }
            
            if (homeST.returns > awayST.returns * 1.1) {
                factors.push(`${homeTeam} return game could provide better starting field position`);
            }
            
            if (homeST.coverage > awayST.coverage * 1.1) {
                factors.push(`${homeTeam} coverage units likely to limit ${awayTeam} return opportunities`);
            }
            
            if (homeST.impact > awayST.impact * 1.2) {
                factors.push(`${homeTeam} special teams more likely to create game-changing plays`);
            }
            
            if (factors.length === 0) {
                factors.push("Special teams fairly even - other factors will determine outcome");
            }
            
            return factors;
        }

        // Render predictions to the page
        function renderPredictions() {
            const predictionsContent = document.getElementById('predictions-content');
            predictionsContent.innerHTML = '';
            
            nflPredictions.games.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'game-card';
                
                const stAdvantageText = game.st_advantage > 0 ? 
                    `${game.home_team} special teams advantage: +${(game.st_advantage * 100).toFixed(1)}%` :
                    `${game.away_team} special teams advantage: +${(Math.abs(game.st_advantage) * 100).toFixed(1)}%`;
                
                gameCard.innerHTML = `
                    <div class="game-matchup">${game.away_team} @ ${game.home_team}</div>
                    <div class="probability-bar">
                        <div class="away-prob" style="width: ${game.away_win_probability * 100}%">
                            ${game.away_team} ${(game.away_win_probability * 100).toFixed(1)}%
                        </div>
                        <div class="home-prob">
                            ${game.home_team} ${(game.home_win_probability * 100).toFixed(1)}%
                        </div>
                    </div>
                    <div class="prediction-details">
                        <div class="predicted-winner">Predicted Winner: ${game.predicted_winner}</div>
                        <div class="pick">Pick: ${game.pick}</div>
                        <div class="st-advantage">${stAdvantageText}</div>
                    </div>
                    <div class="key-factors">
                        <strong>Key Special Teams Factors:</strong>
                        <ul>
                            ${game.key_factors.map(factor => `<li>${factor}</li>`).join('')}
                        </ul>
                    </div>
                `;
                
                predictionsContent.appendChild(gameCard);
            });
        }

        // Initialize the enhanced predictions
        generateWeek4Predictions();
        renderPredictions();
    </script>
</body>
</html>